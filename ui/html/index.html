<!doctype html>
<html lang="en">
  <head>
    <title>Group Expenses</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="view-transition" content="same-origin" />
    <link rel="stylesheet" href="/apps/maat/udjat.css" />
    <link rel="stylesheet" href="/apps/maat/style.css" />
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <script src="/apps/maat/index.js"></script>
    <script src="/apps/maat/path-deps.js"></script>
    <script src="/apps/maat/json-enc.js"></script>
    <script src="/apps/maat/client-side-templates.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/debug.js"></script>
  </head>

  <body hx-boost="true" hx-ext="client-side-templates,path-deps">
    <!-- <header> -->
    <!--   <!-1- navbar -1-> -->
    <!--   <nav> -->
    <!--     <ul> -->
    <!--       <li><a href="">Settings</a></li> -->
    <!--       <li> -->
    <!--         <a href="">About</a> -->
    <!--       </li> -->
    <!--     </ul> -->
    <!--   </nav> -->
    <!-- </header> -->
    <header>
      <div id="error-div" class="error">
        <pre hidden id="error-pre"></pre>
      </div>
    </header>
    <div class="with-sidebar">
      <div>
        <!-- sidebar -->
        <nav>
          <ul
            id="lists"
            hx-get="/api/lists"
            hx-trigger="load, path-deps"
            path-deps="/api/lists"
            mustache-template="lists-template"
          ></ul>
          <template id="lists-template">
            <!-- iterate over array of response object -->
            {{#.}}
            <li>
              <a href="/lists/{{gid}}/tasks#filter-tasks">{{title}}</a>
            </li>
            {{/.}}
          </template>
          <ul>
            <li><a href="/lists/{gid}/settings">Settings</a></li>
            <li>
              <a href="">About</a>
            </li>
            <li>
              <a>
                <form
                  id="put-lists"
                  class="inline-form"
                  hx-put="/api/lists"
                  hx-ext="json-enc"
                  hx-swap="none"
                  hx-vals="js:{id: self.crypto.randomUUID(), public: false}"
                >
                  <input
                    class="inline-input"
                    name="title"
                    type="text"
                    placeholder="Add new list"
                  />
                </form>
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <div>
        <!-- non-sidebar -->
        <!-- <datalist id="tags"> -->
        <!--   <option>#hastag</option> -->
        <!--   <option>#tag</option> -->
        <!-- </datalist> -->
        <!--   <form method="get" action="#"> -->
        <!--     <fieldset> -->
        <!--       <input -->
        <!--         list="tags" -->
        <!--         name="task" -->
        <!--         type="text" -->
        <!--         id="task" -->
        <!--         autocomplete="off" -->
        <!--         placeholder="Filter by tags" -->
        <!--       /> -->
        <!--     </fieldset> -->
        <!--   </form> -->
        <ul id="filter-tasks">
          <li>
            <a class="icon icon-circle-question"></a>
            <input class="inline-input" placeholder="Filter by tags" />
          </li>
        </ul>
        <ul
          id="tasks"
          hx-get="/api/lists/{gid}/tasks"
          hx-trigger="load, path-deps"
          path-deps="/apps/maat/api/lists/*/tasks"
          mustache-template="tasks-template"
        ></ul>
        <template id="tasks-template">
          {{#.}}
          <li>
            <a id="{{tid}}" class="icon icon-circle"> </a>
            {{title}} <small><em>{{tags}}</em></small>
            {{/.}}
          </li>
        </template>
        <!-- <li> -->
        <!--   <a class="icon icon-circle-checked"> </a> -->
        <!--   <s>Cheese</s> -->
        <!-- </li> -->
        <ul>
          <li>
            <a class="icon icon-circle-plus"></a>
            <form
              id="put-tasks"
              class="inline-form"
              hx-put="/api/lists/{gid}/tasks"
              hx-ext="json-enc"
              hx-swap="none"
              hx-vals="js:{tid: self.crypto.randomUUID(), gid: gid(), desc: '', date: new Date().valueOf(), done: false, tags: []}"
              hx-on::after-request="if(event.detail.successful) this.reset();"
            >
              <!-- hx-on::after-request="document.getElementById('put-tasks').reset();"> -->
              <input
                class="inline-input"
                name="title"
                type="text"
                placeholder="Add new task"
              />
            </form>
          </li>
        </ul>
        <!-- <div class="done"> -->
        <!--   <h3>Done</h3> -->
        <!--   <ul> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Bread -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Milk -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Apples -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Grapefruit -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Cat food -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Cheese -->
        <!--     </li> -->
        <!--     <li> -->
        <!--       <a class="icon icon-circle-checked"> </a> -->
        <!--       Wine -->
        <!--     </li> -->
        <!--   </ul> -->
        <!-- </div> -->
        <!-- </main> -->
      </div>
    </div>
    <script src="/apps/maat/helper.js"></script>
  </body>
</html>
